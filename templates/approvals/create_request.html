{% extends 'base_sidebar.html' %} 
{% block title %}{{ title }} - CreatorFlow{% endblock %} 
{% block breadcrumbs %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="{% url 'dashboard' %}">Dashboard</a>
    </li>
    <li class="breadcrumb-item">
      <a href="{% url 'approvals:request_list' %}">Requests</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">New Request</li>
  </ol>
</nav>
{% endblock %} 
{% block content %}
<div id="view-create-request" class="view-section">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card">
        <div class="card-header">
          <h3>
            <i class="bi bi-plus-circle"></i> {{ title }}
            <i
              class="bi bi-info-circle tooltip-icon"
              data-bs-toggle="tooltip"
              data-bs-placement="right"
              title="Submit a video for manager/creator approval before YouTube upload"
            ></i>
          </h3>
        </div>
        <div class="card-body">
          <p class="text-muted">
            Submit a video file for approval to upload to YouTube. Managers and
            the creator will be notified of your request.
          </p>

          <form
            method="post"
            id="approval-request-form"
            data-loading-message="Submitting approval request..."
          >
            {% csrf_token %}

            <div class="mb-3">
              <label for="{{ form.file.id_for_label }}" class="form-label">
                {{ form.file.label }} <span class="text-danger">*</span>
                <i
                  class="bi bi-info-circle tooltip-icon"
                  data-bs-toggle="tooltip"
                  title="Select a video file from your Google Drive"
                ></i>
              </label>
              {{ form.file }} {% if form.file.help_text %}
              <div class="form-text">
                <i class="bi bi-info-circle"></i> {{ form.file.help_text }}
              </div>
              {% endif %} {% if form.file.errors %}
              <div class="invalid-feedback d-block">{{ form.file.errors }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label
                for="{{ form.description.id_for_label }}"
                class="form-label"
              >
                {{ form.description.label }}
                <i
                  class="bi bi-info-circle tooltip-icon"
                  data-bs-toggle="tooltip"
                  title="Optional: Add context or notes about this video for reviewers"
                ></i>
              </label>
              {{ form.description }} {% if form.description.help_text %}
              <div class="form-text">
                <i class="bi bi-info-circle"></i> {{ form.description.help_text
                }}
              </div>
              {% endif %} {% if form.description.errors %}
              <div class="invalid-feedback d-block">
                {{ form.description.errors }}
              </div>
              {% endif %}
            </div>

            {% if form.non_field_errors %}
            <div class="alert alert-danger">{{ form.non_field_errors }}</div>
            {% endif %}

            <div class="d-flex justify-content-between">
              <a
                href="{% url 'approvals:request_list' %}"
                class="btn btn-secondary"
              >
                <i class="bi bi-arrow-left"></i> Cancel
              </a>
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-send"></i> Submit Request
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="mt-3">
        <div class="alert alert-info">
          <strong>Note:</strong> Only video files from Google Drive are
          available for approval requests. If you don't see your file, make sure
          it has been uploaded to Drive and is a video format.
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
